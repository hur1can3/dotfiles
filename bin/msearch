#!/bin/bash
#
# god DAMN mpc, wtf are you taking numbers out of playlist output
#
###

if [ -f $HOME/.dmenurc ]; then
  . $HOME/.dmenurc
else
  DMENU='dmenu -i'
fi

[ "$*" = "all" ] && regex='.*' || regex="$*"

# dmenu with my choice of font has a 90 character limit
CHOICE=$(mpc --format '%title% by %artist% on %album%' playlist | grep -n '.*' | sed 's/:/ /g' | grep -i "$regex" | cut -c 1-90 | $DMENU | awk '{print $1}')

[ -n "$CHOICE" ] && mpc --no-status play $CHOICE
